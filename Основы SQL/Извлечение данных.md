# Извлечение данных

## Запросы и операторы

Предположим у нас есть таблица Songs с полями `place, trackname, artist, streams`

Пример запроса:

```sql
SELECT *
FROM Songs
WHERE streams > 100000;
```

В данном запросе мы хотим получить все записи из таблицы Songs, у который кол-во прослушиваний больше 100_000. Здесь 3 ключевых слова (оператора): `WHERE, SELECT, FROM` . Также запрос оканчивается `;` , который сигнализирует о конце операции. Запросы могут быть сложными и состоять из нескольких операций, например:

```sql
CREATE TABLE Songs                               -- операция создания таблицы
(
    id        INT PRIMARY KEY AUTO_INCREMENT,
    trackname VARCHAR(30),
    artist    VARCHAR(30)
);                                               -- завершение операции

INSERT INTO Songs (trackname, artist)            -- операция наполнения таблицы
VALUES ('Crazy On You', 'Heart'),
       ('My Lover', 'The Sounds');               -- завершение операции

SELECT *                                         -- операция извлечения данных из таблицы
FROM Songs;
```

## Оператор `SELECT`

За извлечение данных отвечает оператор `SELECT` . Чтобы извлечь данные нужно знать что нужно извлечь и откуда. Простейший запрос по извлечению одного поля из таблицы:

```sql
SELECT trackname
FROM Songs;
```

Результатом будет:

```sql
+----------------------+
| trackname            |
+----------------------+
| Crazy on You         |
| My Lover             |
| Running up That Hill |
| Thrill               |
| Spent the Day in Bed |
+----------------------+
```

Для извлечения нескольких полей их нужно перечислить через запятую:

```sql
SELECT trackname, artist, streams
FROM Songs;
```

```sql
+----------------------+------------+---------+
| trackname            | artist     | streams |
+----------------------+------------+---------+
| Crazy on You         | Heart      | 76338   |
| My Lover             | The Sounds | 99488   |
| Running up That Hill | Kate Bush  | 121495  |
| Thrill               | The Sounds | 49345   |
| Spent the Day in Bed | Morrissey  | 174994  |
+----------------------+------------+---------+
```

Если нужно извлечь все поля, то можно указать знак `*`

```sql
SELECT *
FROM Songs;
```

```sql
+----+----------+----------------------+------------+---------+
| id | place    | trackname            | artist     | streams |
+----+----------+----------------------+------------+---------+
| 1  | 4        | Crazy on You         | Heart      | 76338   |
| 2  | 3        | My Lover             | The Sounds | 99488   |
| 3  | 2        | Running up That Hill | Kate Bush  | 121495  |
| 4  | 5        | Thrill               | The Sounds | 49345   |
| 5  | 1        | Spent the Day in Bed | Morrissey  | 174994  |
+----+----------+----------------------+------------+---------+
```

## Извлечение уникальных записей

Чтобы извлечь только уникальный значение из поля, нужно использовать ключевое слово  `DISTINCT`

```sql
SELECT DISTINCT artist
FROM Songs;
```

Это извлечет из поля `artist` только уникальные значения

Оператор `DISTINCT` применяется не только к полю, перед которым он стоит, а ко всем

```sql
SELECT DISTINCT trackname, artist
FROM Songs;
```

```sql
+----------------------+------------+
| trackname            | artist     |
+----------------------+------------+
| Crazy on You         | Heart      |
| My Lover             | The Sounds |
| Running up That Hill | Kate Bush  |
| Thrill               | The Sounds |
| Spent the Day in Bed | Morrissey  |
+----------------------+------------+
```

Здесь вторая и четвертая записи считаются разными, так как их значения совпадают не по всем полям, а только по одному.

## Ограничение результатов запроса

Иногда при извлечении данных из таблицы может потребоваться получить лишь первую запись или некоторое определенное количество записей. Сделать это можно с помощью ключевого слова `LIMIT`

```sql
SELECT trackname
FROM Songs
LIMIT 3;
```

```sql
+----------------------+
| trackname            |
+----------------------+
| Crazy on You         |
| My Lover             |
| Running up That Hill |
+----------------------+
```

Если необходимо получить следующие три записи, можно задать начальную точку извлечения с помощью ключевого слова `OFFSET`.

```sql
SELECT trackname
FROM Songs
LIMIT 3
OFFSET 2;
```

Выражение `LIMIT 3 OFFSET 2` говорит о том, что должно быть извлечено три записи, начиная с записи с индексом два. Таким образом, первое число — это количество строк для извлечения, а второе — начальная точка.

Ключевое слово `OFFSET` можно использовать только в паре с ключевым словом `LIMIT`.

## Псевдонимы

При извлечении различных полей таблицы они сохраняют свои исходные имена в результирующей таблице, однако при необходимости можно воспользоваться **псевдонимами**, чтобы дать им альтернативные имена. Делается это с помощью ключевого слова `AS`, которое располагается между исходным именем поля и новым.

```sql
SELECT trackname AS 'Song name',
       artist AS Artist
FROM Songs;
```

```sql
+----------------------+------------+
| Song name            | Artist     |
+----------------------+------------+
| Crazy On You         | Heart      |
| My Lover             | The Sounds |
| Running up That Hill | Kate Bush  |
| Thrill               | The Sounds |
| Spent the Day in Bed | Morrissey  |
+----------------------+------------+
```