# Текстовые функции, 3

## Функция `SUBSTRING`

Функция `SUBSTRING()` используется для извлечения подстроки из строки. Она принимает три аргумента в следующем порядке:

- `str` — исходная строка
- `start` — позиция первого извлекаемого символа
- `len` — длина извлекаемой подстроки (может не указываться, в таком случае подстрока извлекается до конца)

Функция извлекает из строки `str` подстроку длины `len`, начиная с символа с позицией `start`, и возвращает полученный результат.

Результатом приведенного ниже запроса:

```sql
SELECT SUBSTRING('beegeek', 1),
       SUBSTRING('beegeek', 4),
       SUBSTRING('beegeek', 4, 2);
```

является:

```
+-------------------------+-------------------------+----------------------------+
| SUBSTRING('beegeek', 1) | SUBSTRING('beegeek', 4) | SUBSTRING('beegeek', 4, 2) |
+-------------------------+-------------------------+----------------------------+
| beegeek                 | geek                    | ge                         |
+-------------------------+-------------------------+----------------------------+
```

Обратите внимание, что при использовании функции `SUBSTRING()` символы исходной строки нумеруются с `1`, а не с `0`.

Позиция первого извлекаемого символа может быть отрицательным числом, в таком случае символы нумеруются с конца. Последнему символу соответствует позиция `-1`, предпоследнему — `-2`, и так далее.

## Функция `SUBSTRING_INDEX`

Функция `SUBSTRING_INDEX()` используется для извлечения подстроки из строки с помощью разделителя. Она принимает три аргумента в следующем порядке:

- `str` — исходная строка
- `delimiter` — разделитель
- `count` — количество появлений разделителя

Функция возвращает подстроку, входящую в `str`, перед `count` появлением разделителя `delimiter`.

Результатом приведенного ниже запроса:

```less
SELECT SUBSTRING_INDEX('g-e-e-k', '-', 1),
       SUBSTRING_INDEX('g-e-e-k', '-', 2),
       SUBSTRING_INDEX('g-e-e-k', '-', 3);
```

является:

```
+------------------------------------+------------------------------------+------------------------------------+
| SUBSTRING_INDEX('g-e-e-k', '-', 1) | SUBSTRING_INDEX('g-e-e-k', '-', 2) | SUBSTRING_INDEX('g-e-e-k', '-', 3) |
+------------------------------------+------------------------------------+------------------------------------+
| g                                  | g-e                                | g-e-e                              |
+------------------------------------+------------------------------------+------------------------------------+
```

## Функция `TRIM`

Функция `TRIM()` используется для удаления всех вхождений подстроки из начала и/или конца строки. Синтаксис данной функции несколько отличается от предыдущих, так как при ее вызове аргументы не указываются через запятую, а связываются с помощью ключевого слова `FROM`:

```css
TRIM(<ключевое слово LEADING, TRALING или BOTH> <удаляемая подстрока> FROM <исходная строка>)
```

Ключевые слова `LEADING, TRALING` и `BOTH` определяют, откуда будет происходить удаление подстроки:

- `LEADING` — из начала строки
- `TRAILING` — из конца строки
- `BOTH` — из начала и конца строки

Результатом приведенного ниже запроса:

```sql
SELECT TRIM(LEADING '-' FROM '--bee--'),
       TRIM(TRAILING '-' FROM '--bee--'),
       TRIM(BOTH '-' FROM '--bee--');
```

является:

```
+----------------------------------+-----------------------------------+-------------------------------+
| TRIM(LEADING '-' FROM '--bee--') | TRIM(TRAILING '-' FROM '--bee--') | TRIM(BOTH '-' FROM '--bee--') |
+----------------------------------+-----------------------------------+-------------------------------+
| bee--                            | --bee                             | bee                           |
+----------------------------------+-----------------------------------+-------------------------------+
```

Ключевые слова `LEADING, TRAILING` и `BOTH` могут не указываться, в таком случае удаление подстроки происходит из начала и конца строки.

Результатом приведенного ниже запроса:

```sql
SELECT TRIM('-' FROM '--bee--');
```

Удаляемая подстрока также может быть опущена, в таком случае ею считается пробел.

Результатом приведенного ниже запроса:

```sql
SELECT TRIM(LEADING FROM '   bee   '),
       TRIM(TRAILING FROM '   bee   '),
       TRIM(BOTH FROM '   bee   ');
```